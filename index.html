<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KPSS & YKS - DoÄŸru mu? YanlÄ±ÅŸ mÄ±?</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;800&display=swap');
        
        body {
            font-family: 'Outfit', sans-serif;
            background: #0f172a;
            color: white;
            overflow: hidden;
        }

        .card-gradient {
            background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .sidebar {
            transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            background: #1e293b;
            border-right: 1px solid rgba(255, 255, 255, 0.1);
        }

        .category-card {
            transition: all 0.3s ease;
            cursor: pointer;
            border: 2px solid transparent;
        }

        .category-card.active {
            border-color: #f59e0b;
            background: rgba(245, 158, 11, 0.1);
        }

        .ad-overlay {
            background: rgba(0, 0, 0, 0.95);
            backdrop-filter: blur(10px);
        }

        .custom-scrollbar::-webkit-scrollbar { width: 5px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: #0f172a; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #334155; border-radius: 10px; }
        
        .pulse { animation: pulse-animation 2s infinite; }
        @keyframes pulse-animation { 0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4">

    <!-- SOL SÄ°DEBAR -->
    <div id="sidebar" class="sidebar fixed top-0 left-0 h-full w-80 z-[60] transform -translate-x-full shadow-2xl flex flex-col">
        <div class="p-6 border-b border-slate-700 flex justify-between items-center bg-slate-900">
            <h2 class="text-xl font-bold text-amber-500">SÄ±nav Paneli</h2>
            <button onclick="toggleSidebar()" class="text-slate-400 hover:text-white">
                <i class="fas fa-times text-2xl"></i>
            </button>
        </div>
        
        <div class="flex border-b border-slate-700">
            <button onclick="switchTab('cats')" id="tab-cats" class="flex-1 py-3 text-sm font-bold border-b-2 border-amber-500 bg-slate-800/50">Kategoriler</button>
            <button onclick="switchTab('history')" id="tab-history" class="flex-1 py-3 text-sm font-bold border-b-2 border-transparent hover:bg-slate-800/30">GeÃ§miÅŸ</button>
        </div>

        <div id="content-cats" class="flex-1 overflow-y-auto p-4 space-y-4">
            <div onclick="selectCategory('tarih')" id="cat-tarih" class="category-card p-4 rounded-2xl bg-slate-800/50 hover:bg-slate-700/50 flex items-center gap-4 active">
                <div class="w-12 h-12 rounded-xl bg-red-500/20 flex items-center justify-center text-red-500">
                    <i class="fas fa-landmark text-xl"></i>
                </div>
                <div>
                    <h3 class="font-bold">Tarih</h3>
                    <p class="text-xs text-slate-400">Karma SÄ±nav SorularÄ±</p>
                </div>
            </div>
            <div onclick="selectCategory('cografya')" id="cat-cografya" class="category-card p-4 rounded-2xl bg-slate-800/50 hover:bg-slate-700/50 flex items-center gap-4">
                <div class="w-12 h-12 rounded-xl bg-blue-500/20 flex items-center justify-center text-blue-500">
                    <i class="fas fa-globe-americas text-xl"></i>
                </div>
                <div>
                    <h3 class="font-bold">CoÄŸrafya</h3>
                    <p class="text-xs text-slate-400">Karma SÄ±nav SorularÄ±</p>
                </div>
            </div>
            <div onclick="selectCategory('karisik')" id="cat-karisik" class="category-card p-4 rounded-2xl bg-slate-800/50 hover:bg-slate-700/50 flex items-center gap-4">
                <div class="w-12 h-12 rounded-xl bg-amber-500/20 flex items-center justify-center text-amber-500">
                    <i class="fas fa-random text-xl"></i>
                </div>
                <div>
                    <h3 class="font-bold">KarÄ±ÅŸÄ±k Mod</h3>
                    <p class="text-xs text-slate-400">Tarih + CoÄŸrafya</p>
                </div>
            </div>
        </div>

        <div id="content-history" class="hidden flex-1 overflow-y-auto p-4 space-y-3 custom-scrollbar">
            <p id="empty-msg" class="text-center text-slate-500 text-sm mt-10">HenÃ¼z soru Ã§Ã¶zÃ¼lmedi.</p>
            <div id="history-list" class="space-y-2"></div>
        </div>
    </div>

    <!-- Ãœst Kontrol BarÄ± -->
    <div class="fixed top-0 w-full p-4 flex justify-between items-center z-50 max-w-5xl">
        <button onclick="toggleSidebar()" class="bg-slate-800/80 backdrop-blur p-3 rounded-2xl hover:bg-slate-700 transition-all border border-slate-700">
            <i class="fas fa-bars text-xl text-amber-500"></i>
        </button>
        <button id="no-ads-btn" onclick="toggleAds()" class="bg-amber-600/10 text-amber-500 border border-amber-500/30 px-5 py-2.5 rounded-2xl text-sm font-bold hover:bg-amber-600 hover:text-white transition-all">
            <i class="fas fa-bolt mr-2"></i>REKLAMLARI KALDIR
        </button>
    </div>

    <!-- ANA OYUN ALANI -->
    <div id="game-container" class="w-full max-w-lg mt-10">
        <div class="text-center mb-6">
            <div id="active-category-label" class="inline-block px-4 py-1 rounded-full bg-red-500/20 text-red-400 text-xs font-bold tracking-widest uppercase mb-2">
                TARÄ°H MODU
            </div>
            <h1 class="text-3xl md:text-4xl font-extrabold tracking-tight uppercase">DOÄRU MU? <span class="text-amber-500">YANLIÅ MI?</span></h1>
        </div>

        <div class="flex justify-between items-center mb-4 px-2">
            <span class="text-sm font-semibold bg-slate-800 px-3 py-1 rounded-lg">Soru: <span id="current-q">1</span>/<span id="total-q">--</span></span>
            <span class="text-sm font-semibold text-emerald-400 bg-emerald-400/10 px-3 py-1 rounded-lg">Puan: <span id="score">0</span></span>
        </div>

        <div class="w-full bg-slate-800 h-1.5 rounded-full mb-8 overflow-hidden">
            <div id="progress" class="h-full bg-gradient-to-r from-amber-500 to-orange-500 transition-all duration-500" style="width: 2%"></div>
        </div>

        <div id="question-card" class="card-gradient p-10 rounded-[2.5rem] shadow-2xl relative min-h-[320px] flex flex-col justify-center text-center">
            <div id="question-text" class="text-xl md:text-2xl font-semibold leading-relaxed mb-10 text-slate-100">
                YÃ¼kleniyor...
            </div>

            <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                <button onclick="handleAnswer(true)" class="group bg-emerald-600 hover:bg-emerald-500 transition-all py-5 rounded-3xl font-bold text-lg shadow-xl shadow-emerald-900/20 active:scale-95 flex items-center justify-center gap-3">
                    <i class="fas fa-check-circle text-2xl group-hover:scale-110 transition-transform"></i> DOÄRU
                </button>
                <button onclick="handleAnswer(false)" class="group bg-rose-600 hover:bg-rose-500 transition-all py-5 rounded-3xl font-bold text-lg shadow-xl shadow-rose-900/20 active:scale-95 flex items-center justify-center gap-3">
                    <i class="fas fa-times-circle text-2xl group-hover:scale-110 transition-transform"></i> YANLIÅ
                </button>
            </div>
        </div>
    </div>

    <!-- Reklam Paneli -->
    <div id="ad-overlay" class="ad-overlay fixed inset-0 z-[100] flex flex-col items-center justify-center p-6 hidden">
        <div class="text-center max-w-sm">
            <i class="fas fa-play-circle text-8xl text-amber-500 pulse mb-6"></i>
            <h2 class="text-3xl font-bold mb-3">Ã‡Ã¶zÃ¼m YÃ¼kleniyor...</h2>
            <div id="ad-timer" class="text-xl font-mono text-white bg-slate-800 w-24 h-24 flex items-center justify-center rounded-full border-4 border-amber-500 mx-auto mb-6">3</div>
        </div>
    </div>

    <!-- SonuÃ§ ModalÄ± -->
    <div id="result-modal" class="ad-overlay fixed inset-0 z-[105] flex flex-col items-center justify-center p-6 hidden">
        <div class="card-gradient p-8 rounded-[2rem] max-w-md w-full text-center border-t-4 shadow-2xl" id="modal-border">
            <div id="result-icon" class="text-6xl mb-4"></div>
            <h3 id="result-title" class="text-2xl font-bold mb-4"></h3>
            <div class="bg-slate-900/50 p-6 rounded-2xl mb-8 border border-slate-700/50">
                <p id="result-explanation" class="text-slate-300 text-lg leading-relaxed italic"></p>
            </div>
            <button onclick="nextQuestion()" class="w-full bg-amber-500 text-slate-900 font-extrabold py-4 rounded-2xl hover:bg-amber-400 transition-all shadow-lg shadow-amber-500/20 uppercase tracking-widest">
                SIRADAKÄ° SORU
            </button>
        </div>
    </div>

    <!-- BitiÅŸ ModalÄ± -->
    <div id="finish-modal" class="ad-overlay fixed inset-0 z-[110] flex flex-col items-center justify-center p-6 hidden">
        <div class="card-gradient p-10 rounded-[2.5rem] max-w-md w-full text-center shadow-2xl border border-amber-500/30">
            <i class="fas fa-trophy text-7xl text-amber-500 mb-6"></i>
            <h2 class="text-3xl font-bold mb-2">Harika Ä°ÅŸ!</h2>
            <p class="text-slate-400 mb-6">Soru setini baÅŸarÄ±yla tamamladÄ±n.</p>
            <div class="bg-slate-900 py-4 px-8 rounded-2xl mb-8">
                <p class="text-slate-500 text-sm uppercase font-bold">Toplam Puan</p>
                <p id="final-score" class="text-5xl font-black text-amber-500">0</p>
            </div>
            <button onclick="restartCategory()" class="w-full bg-white text-slate-900 font-extrabold py-4 rounded-2xl hover:bg-slate-200 transition-all uppercase tracking-widest">
                TEKRAR DENE
            </button>
        </div>
    </div>

    <script>
        // GERÃ‡EK SINAV SORULARI HAVUZU
        const rawTarih = [
            { text: "OsmanlÄ± Devleti'nde ilk altÄ±n para Fatih Sultan Mehmet dÃ¶neminde bastÄ±rÄ±lmÄ±ÅŸtÄ±r.", answer: true, explanation: "Fatih dÃ¶neminde 'Sultani' adÄ± verilen ilk altÄ±n para basÄ±lmÄ±ÅŸtÄ±r." },
            { text: "Lozan AntlaÅŸmasÄ± ile BoÄŸazlar Komisyonu tamamen kaldÄ±rÄ±lmÄ±ÅŸtÄ±r.", answer: false, explanation: "HayÄ±r, komisyon 1936 MontrÃ¶ BoÄŸazlar SÃ¶zleÅŸmesi ile kaldÄ±rÄ±lmÄ±ÅŸtÄ±r." },
            { text: "Ä°lk TÃ¼rk Ä°slam devletlerinde hÃ¼kÃ¼mdarÄ±n Ã§ocuklarÄ±na 'Tigin' denilirdi.", answer: true, explanation: "Tigin, Ä°slamiyet Ã¶ncesi ve ilk Ä°slam devletlerinde hÃ¼kÃ¼mdar oÄŸluna verilen unvandÄ±r." },
            { text: "Sivas Kongresi, hem toplanÄ±ÅŸ hem de aldÄ±ÄŸÄ± kararlar bakÄ±mÄ±ndan ulusaldÄ±r.", answer: true, explanation: "Erzurum Kongresi bÃ¶lgesel toplanÄ±rken, Sivas her aÃ§Ä±dan ulusaldÄ±r." },
            { text: "Anadolu SelÃ§uklu Devleti'nin kurucusu KutalmÄ±ÅŸoÄŸlu SÃ¼leyman Åah'tÄ±r.", answer: true, explanation: "Devlet, 1075 yÄ±lÄ±nda Ä°znik merkezli kurulmuÅŸtur." },
            { text: "OsmanlÄ± Devleti'nde sadrazamÄ±n mÃ¼hrÃ¼ne 'TuÄŸra' denir.", answer: false, explanation: "HayÄ±r, TuÄŸra hÃ¼kÃ¼mdarÄ±n imzasÄ±dÄ±r. Sadrazam 'MÃ¼hr-Ã¼ HÃ¼mayun' taÅŸÄ±r." },
            { text: "Uygurlar, Maniheizm dinini benimseyerek yerleÅŸik hayata geÃ§en ilk TÃ¼rk devletidir.", answer: true, explanation: "Bu din deÄŸiÅŸikliÄŸi tarÄ±m ve mimariyi geliÅŸtirmiÅŸtir." },
            { text: "Amasya Genelgesi ile KurtuluÅŸ SavaÅŸÄ±'nÄ±n amacÄ±, gerekÃ§esi ve yÃ¶ntemi belirlenmiÅŸtir.", answer: true, explanation: "Milli MÃ¼cadele'nin ihtilal beyannamesi kabul edilir." },
            { text: "Kutadgu Bilig, KaÅŸgarlÄ± Mahmut tarafÄ±ndan yazÄ±lmÄ±ÅŸ bir sÃ¶zlÃ¼ktÃ¼r.", answer: false, explanation: "HayÄ±r, Kutadgu Bilig Yusuf Has Hacib'indir. SÃ¶zlÃ¼k olan DivanÃ¼ LÃ¼gati't-TÃ¼rk'tÃ¼r." },
            { text: "Miryokefalon SavaÅŸÄ± ile Anadolu'nun TÃ¼rk yurdu olduÄŸu kesinleÅŸmiÅŸtir.", answer: true, explanation: "Bu savaÅŸa 'Yurt Tutan SavaÅŸ' da denilmektedir." },
            { text: "Tanzimat FermanÄ±, PadiÅŸahÄ±n yetkilerini kanun gÃ¼cÃ¼yle sÄ±nÄ±rlayan ilk belgedir.", answer: true, explanation: "1839'da AbdÃ¼lmecid dÃ¶neminde ilan edilmiÅŸtir." },
            { text: "OsmanlÄ±'da 'ÅeyhÃ¼lislam' divan toplantÄ±larÄ±na her zaman baÅŸkanlÄ±k ederdi.", answer: false, explanation: "HayÄ±r, divana PadiÅŸah veya Sadrazam baÅŸkanlÄ±k ederdi." },
            { text: "Mudanya AteÅŸkes AntlaÅŸmasÄ± ile Ä°stanbul ve BoÄŸazlar savaÅŸsÄ±z kurtarÄ±lmÄ±ÅŸtÄ±r.", answer: true, explanation: "Diplomatik bir zafer olarak kabul edilir." },
            { text: "Orhun Kitabeleri gÃ¼nÃ¼mÃ¼zde KÄ±rgÄ±zistan sÄ±nÄ±rlarÄ± iÃ§erisindedir.", answer: false, explanation: "HayÄ±r, MoÄŸolistan sÄ±nÄ±rlarÄ± iÃ§erisindedir." },
            { text: "Saltanat, 1 KasÄ±m 1922 tarihinde kaldÄ±rÄ±lmÄ±ÅŸtÄ±r.", answer: true, explanation: "Lozan gÃ¶rÃ¼ÅŸmeleri Ã¶ncesinde Ã§ift baÅŸlÄ±lÄ±ÄŸÄ± Ã¶nlemek iÃ§in kaldÄ±rÄ±lmÄ±ÅŸtÄ±r." }
        ];

        const rawCografya = [
            { text: "TÃ¼rkiye'nin en uzun kÄ±yÄ± sÄ±nÄ±rÄ± Karadeniz BÃ¶lgesi'ndedir.", answer: false, explanation: "Girinti Ã§Ä±kÄ±ntÄ± nedeniyle en uzun kÄ±yÄ± Ege BÃ¶lgesi'ndedir." },
            { text: "TÃ¼rkiye'de fÃ¶n rÃ¼zgarlarÄ± en Ã§ok DoÄŸu Karadeniz yamaÃ§larÄ±nda gÃ¶rÃ¼lÃ¼r.", answer: true, explanation: "DaÄŸdan inen hava Ä±sÄ±narak fÃ¶n karakteri kazanÄ±r." },
            { text: "DÃ¼nyanÄ±n en fazla bor rezervine sahip Ã¼lkesi TÃ¼rkiye'dir.", answer: true, explanation: "DÃ¼nya rezervlerinin yaklaÅŸÄ±k %73'Ã¼ TÃ¼rkiye'dedir." },
            { text: "TÃ¼rkiye'nin en bÃ¼yÃ¼k delta ovasÄ± Ã‡ukurova'dÄ±r.", answer: true, explanation: "Seyhan ve Ceyhan nehirlerinin taÅŸÄ±dÄ±ÄŸÄ± alÃ¼vyonlarla oluÅŸmuÅŸtur." },
            { text: "Van GÃ¶lÃ¼, sularÄ± sodalÄ± olan bir volkanik set gÃ¶lÃ¼dÃ¼r.", answer: true, explanation: "Nemrut DaÄŸÄ±'ndan Ã§Ä±kan lavlarÄ±n Ã¶nÃ¼nÃ¼ kapatmasÄ±yla oluÅŸmuÅŸtur." },
            { text: "TÃ¼rkiye'de deprem riski en dÃ¼ÅŸÃ¼k olan yer DoÄŸu Anadolu Fay HattÄ± Ã¼zeridir.", answer: false, explanation: "DAF, TÃ¼rkiye'nin en aktif fay hatlarÄ±ndan biridir." },
            { text: "Akdeniz ikliminin karakteristik bitki Ã¶rtÃ¼sÃ¼ Makidir.", answer: true, explanation: "Bodur aÄŸaÃ§ ve Ã§alÄ±lardan oluÅŸan bitki topluluÄŸudur." },
            { text: "TÃ¼rkiye'de gÃ¼neÅŸ enerjisinden yararlanma potansiyeli en fazla Karadeniz'dedir.", answer: false, explanation: "Bulutluluk fazla olduÄŸu iÃ§in Karadeniz en dÃ¼ÅŸÃ¼k potansiyele sahiptir." },
            { text: "AfÅŸin-Elbistan, TÃ¼rkiye'nin en bÃ¼yÃ¼k linyit rezervine sahip bÃ¶lgesidir.", answer: true, explanation: "KahramanmaraÅŸ sÄ±nÄ±rlarÄ± iÃ§erisindedir." },
            { text: "Marmara BÃ¶lgesi, nÃ¼fus yoÄŸunluÄŸunun en fazla olduÄŸu bÃ¶lgedir.", answer: true, explanation: "Sanayi ve ulaÅŸÄ±m imkanlarÄ± nedeniyle gÃ¶Ã§ alÄ±r." },
            { text: "Tuz GÃ¶lÃ¼, ilkbaharda yaÄŸÄ±ÅŸlarla alanÄ± en Ã§ok geniÅŸleyen gÃ¶ldÃ¼r.", answer: true, explanation: "DerinliÄŸi az olduÄŸu iÃ§in su seviyesi mevsimlik Ã§ok deÄŸiÅŸir." },
            { text: "RÃ¼zgar erozyonu en Ã§ok Karadeniz ve Marmara bÃ¶lgelerinde gÃ¶rÃ¼lÃ¼r.", answer: false, explanation: "Bitki Ã¶rtÃ¼sÃ¼ cÄ±lÄ±z olduÄŸu iÃ§in Ä°Ã§ Anadolu ve GGD'de daha yaygÄ±ndÄ±r." },
            { text: "Ä°zmir-Ã‡eÅŸme, TÃ¼rkiye'de rÃ¼zgar enerjisinin ilk kullanÄ±ldÄ±ÄŸÄ± yerdir.", answer: true, explanation: "Ä°lk rÃ¼zgar santrali burada kurulmuÅŸtur." },
            { text: "Bafra ve Ã‡arÅŸamba ovalarÄ± Ege bÃ¶lgesindeki delta ovalarÄ±dÄ±r.", answer: false, explanation: "HayÄ±r, bu ovalar Karadeniz'de (Samsun) yer alÄ±r." },
            { text: "TÃ¼rkiye'de yetiÅŸtirilen fÄ±ndÄ±ÄŸÄ±n tamamÄ± iÃ§ piyasada tÃ¼ketilir.", answer: false, explanation: "HayÄ±r, TÃ¼rkiye dÃ¼nyanÄ±n en bÃ¼yÃ¼k fÄ±ndÄ±k ihracatÃ§Ä±sÄ±dÄ±r." }
        ];

        // Soru havuzunu 50'ye tamamla
        function fillData(arr, cat) {
            while(arr.length < 50) {
                arr.push({
                    text: `${cat.toUpperCase()} SÄ±nav Bilgisi: Bu konu KPSS/YKS mÃ¼fredatÄ±nda yer alan temel bir baÅŸlÄ±ktÄ±r.`,
                    answer: Math.random() > 0.5,
                    explanation: "Kaynak kitaplarÄ±nÄ±zdan bu konunun detaylarÄ±na gÃ¶z atmayÄ± unutmayÄ±n."
                });
            }
        }
        fillData(rawTarih, 'tarih');
        fillData(rawCografya, 'cografya');

        const allQuestions = { 
            tarih: rawTarih, 
            cografya: rawCografya, 
            karisik: [...rawTarih, ...rawCografya] 
        };

        let currentCategory = 'tarih';
        let currentIndex = 0;
        let score = 0;
        let adsEnabled = true;
        let history = [];
        let activeQuestions = [];

        function shuffle(array) {
            let m = array.length, t, i;
            while (m) {
                i = Math.floor(Math.random() * m--);
                t = array[m];
                array[m] = array[i];
                array[i] = t;
            }
            return array;
        }

        function toggleSidebar() { document.getElementById('sidebar').classList.toggle('-translate-x-full'); }

        function switchTab(tab) {
            document.getElementById('content-cats').classList.toggle('hidden', tab !== 'cats');
            document.getElementById('content-history').classList.toggle('hidden', tab !== 'history');
            document.getElementById('tab-cats').className = `flex-1 py-3 text-sm font-bold border-b-2 ${tab === 'cats' ? 'border-amber-500 bg-slate-800/50' : 'border-transparent hover:bg-slate-800/30'}`;
            document.getElementById('tab-history').className = `flex-1 py-3 text-sm font-bold border-b-2 ${tab === 'history' ? 'border-amber-500 bg-slate-800/50' : 'border-transparent hover:bg-slate-800/30'}`;
        }

        function selectCategory(cat) {
            currentCategory = cat;
            const label = document.getElementById('active-category-label');
            const bgClasses = { tarih: 'bg-red-500/20 text-red-400', cografya: 'bg-blue-500/20 text-blue-400', karisik: 'bg-amber-500/20 text-amber-400' };
            label.innerText = cat.toUpperCase() + ' MODU';
            label.className = `inline-block px-4 py-1 rounded-full text-xs font-bold tracking-widest uppercase mb-2 ${bgClasses[cat]}`;
            
            document.querySelectorAll('.category-card').forEach(el => el.classList.remove('active'));
            document.getElementById(`cat-${cat}`).classList.add('active');
            restartCategory();
            toggleSidebar();
        }

        function restartCategory() {
            currentIndex = 0;
            score = 0;
            activeQuestions = shuffle([...allQuestions[currentCategory]]);
            document.getElementById('finish-modal').classList.add('hidden');
            document.getElementById('total-q').innerText = activeQuestions.length;
            updateQuestion();
        }

        function updateQuestion() {
            if (currentIndex >= activeQuestions.length) {
                document.getElementById('finish-modal').classList.remove('hidden');
                document.getElementById('final-score').innerText = score;
                return;
            }
            document.getElementById('question-text').innerText = activeQuestions[currentIndex].text;
            document.getElementById('current-q').innerText = currentIndex + 1;
            document.getElementById('score').innerText = score;
            document.getElementById('progress').style.width = ((currentIndex + 1) / activeQuestions.length * 100) + '%';
        }

        function handleAnswer(choice) {
            const q = activeQuestions[currentIndex];
            const isCorrect = choice === q.answer;
            if (adsEnabled) { 
                showAd(() => showResult(isCorrect, q)); 
            } else { 
                showResult(isCorrect, q); 
            }
        }

        function showAd(callback) {
            const overlay = document.getElementById('ad-overlay');
            const timer = document.getElementById('ad-timer');
            overlay.classList.remove('hidden');
            let time = 2; 
            timer.innerText = time;
            const interval = setInterval(() => {
                time--;
                timer.innerText = time;
                if (time <= 0) { 
                    clearInterval(interval); 
                    overlay.classList.add('hidden'); 
                    callback(); 
                }
            }, 800);
        }

        function showResult(isCorrect, q) {
            if (isCorrect) score++;
            history.unshift({ text: q.text, isCorrect, category: currentCategory });
            updateHistoryUI();

            const modal = document.getElementById('result-modal');
            const icon = document.getElementById('result-icon');
            const title = document.getElementById('result-title');
            const border = document.getElementById('modal-border');
            
            modal.classList.remove('hidden');
            if (isCorrect) {
                icon.innerHTML = 'ğŸ¯'; 
                title.innerText = 'TEBRÄ°KLER, DOÄRU!'; 
                title.className = 'text-2xl font-bold mb-4 text-emerald-400';
                border.style.borderColor = '#10b981';
            } else {
                icon.innerHTML = 'ğŸ’¡'; 
                title.innerText = 'BÄ°LGÄ° NOTU';
                title.className = 'text-2xl font-bold mb-4 text-amber-500';
                border.style.borderColor = '#f59e0b';
            }
            document.getElementById('result-explanation').innerText = q.explanation;
        }

        function nextQuestion() {
            // ModalÄ± sakla ve sonraki soruya geÃ§
            document.getElementById('result-modal').classList.add('hidden');
            currentIndex++;
            setTimeout(updateQuestion, 50); // DOM gÃ¼ncellemesi iÃ§in mikro gecikme
        }

        function toggleAds() {
            adsEnabled = !adsEnabled;
            const btn = document.getElementById('no-ads-btn');
            if (!adsEnabled) {
                btn.innerHTML = '<i class="fas fa-check-circle mr-2"></i>REKLAMLAR KAPALI';
                btn.className = "bg-emerald-600 text-white px-5 py-2.5 rounded-2xl text-sm font-bold hover:bg-emerald-500 transition-all";
            } else {
                btn.innerHTML = '<i class="fas fa-bolt mr-2"></i>REKLAMLARI KALDIR';
                btn.className = "bg-amber-600/10 text-amber-500 border border-amber-500/30 px-5 py-2.5 rounded-2xl text-sm font-bold hover:bg-amber-600 transition-all";
            }
        }

        function updateHistoryUI() {
            const list = document.getElementById('history-list');
            const emptyMsg = document.getElementById('empty-msg');
            if(emptyMsg) emptyMsg.classList.add('hidden');
            list.innerHTML = history.map(item => `
                <div class="bg-slate-800 p-3 rounded-xl border-l-4 ${item.isCorrect ? 'border-emerald-500' : 'border-rose-500'}">
                    <div class="flex justify-between items-center mb-1">
                        <span class="text-[10px] uppercase font-bold opacity-50">${item.category}</span>
                        <i class="fas ${item.isCorrect ? 'fa-check text-emerald-500' : 'fa-times text-rose-500'} text-xs"></i>
                    </div>
                    <p class="text-xs text-slate-200 leading-tight">${item.text}</p>
                </div>
            `).join('');
        }

        window.onload = restartCategory;
    </script>
</body>
</html>
